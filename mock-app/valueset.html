<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å€¼é›†ç®¡ç† - TWPAS</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: #f0f2f5; }
    .header { background: linear-gradient(135deg, #1a73e8, #0d47a1); color: white; padding: 0 1.5rem; height: 60px; display: flex; justify-content: space-between; align-items: center; position: fixed; top: 0; left: 0; right: 0; z-index: 100; }
    .header h1 { font-size: 1.25rem; }
    .sidebar { position: fixed; left: 0; top: 60px; bottom: 0; width: 240px; background: white; border-right: 1px solid #e0e0e0; }
    .sidebar-menu { list-style: none; padding: 0.5rem 0; }
    .sidebar-menu li a { display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1.25rem; color: #333; text-decoration: none; border-left: 3px solid transparent; }
    .sidebar-menu li a:hover { background: #f5f5f5; }
    .sidebar-menu li a.active { background: #e3f2fd; color: #1a73e8; border-left-color: #1a73e8; }
    .menu-divider { height: 1px; background: #e0e0e0; margin: 0.5rem 1rem; }
    .menu-label { padding: 0.75rem 1.25rem 0.5rem; font-size: 0.75rem; color: #888; }
    .main { margin-left: 240px; margin-top: 60px; padding: 1.5rem; }
    .page-header { margin-bottom: 1.5rem; }
    .page-header h2 { font-size: 1.5rem; color: #333; }
    .tabs { display: flex; gap: 0.5rem; margin-bottom: 1rem; }
    .tab { padding: 0.6rem 1.2rem; background: white; border: 1px solid #ddd; border-radius: 6px; cursor: pointer; font-size: 0.9rem; }
    .tab.active { background: #1a73e8; color: white; border-color: #1a73e8; }
    .card { background: white; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); }
    .card-header { padding: 1rem 1.5rem; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; }
    .card-body { padding: 1.5rem; }
    table { width: 100%; border-collapse: collapse; }
    th, td { padding: 0.6rem 1rem; text-align: left; border-bottom: 1px solid #eee; }
    th { background: #fafafa; font-size: 0.85rem; color: #666; }
    .badge { padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.75rem; }
    .badge-system { background: #e3f2fd; color: #1565c0; }
    .badge-custom { background: #f3e5f5; color: #7b1fa2; }
    .header-right { display: flex; align-items: center; gap: 1rem; }
    .logout-btn { background: rgba(255,255,255,0.15); border: 1px solid rgba(255,255,255,0.3); color: white; padding: 0.4rem 1rem; border-radius: 4px; cursor: pointer; }
    .btn-primary { background: #1a73e8; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer; }
  </style>
</head>
<body>
  <header class="header">
    <h1>ğŸ¥ TWPAS ç™Œç—‡ç”¨è—¥äº‹å‰å¯©æŸ¥ç³»çµ±</h1>
    <div class="header-right">
      <span id="username-display"></span>
      <button class="logout-btn" onclick="logout()">ç™»å‡º</button>
    </div>
  </header>

  <nav class="sidebar">
    <ul class="sidebar-menu">
      <li><a href="/dashboard"><span>ğŸ“Š</span> å„€è¡¨æ¿</a></li>
      <div class="menu-divider"></div>
      <div class="menu-label">æ¡ˆä»¶ç®¡ç†</div>
      <li><a href="/claim/new"><span>â•</span> æ–°å¢ç”³è«‹</a></li>
      <li><a href="/claim"><span>ğŸ“‹</span> æ¡ˆä»¶åˆ—è¡¨</a></li>
      <div class="menu-divider"></div>
      <div class="menu-label">è³‡æ–™ç®¡ç†</div>
      <li><a href="/patient"><span>ğŸ‘¤</span> ç—…æ‚£è³‡æ–™</a></li>
      <li><a href="/valueset" class="active"><span>ğŸ“š</span> å€¼é›†ç®¡ç†</a></li>
      <div class="menu-divider"></div>
      <div class="menu-label">ç³»çµ±åŠŸèƒ½</div>
      <li><a href="/fhir"><span>ğŸ”„</span> FHIR è½‰æ›</a></li>
      <li><a href="/nhi-upload"><span>â˜ï¸</span> å¥ä¿ä¸Šå‚³</a></li>
    </ul>
  </nav>

  <main class="main">
    <div class="page-header">
      <h2>ğŸ“š å€¼é›†ç®¡ç†</h2>
    </div>

    <div class="tabs">
      <button class="tab active">è—¥ç‰©ä»£ç¢¼</button>
      <button class="tab">è¨ºæ–·ä»£ç¢¼</button>
      <button class="tab">ç”³å ±é¡åˆ¥</button>
      <button class="tab">æ¡ˆä»¶é¡å‹</button>
    </div>

    <div class="card">
      <div class="card-header">
        <span>è—¥ç‰©ä»£ç¢¼å€¼é›†</span>
        <button class="btn-primary">â• æ–°å¢</button>
      </div>
      <table>
        <thead>
          <tr>
            <th>ä»£ç¢¼</th>
            <th>åç¨±</th>
            <th>è‹±æ–‡åç¨±</th>
            <th>é¡å‹</th>
            <th>ç‹€æ…‹</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>KC00123456</td>
            <td>Pembrolizumab</td>
            <td>Keytruda 100mg</td>
            <td><span class="badge badge-system">ç³»çµ±</span></td>
            <td>å•Ÿç”¨</td>
          </tr>
          <tr>
            <td>KC00123457</td>
            <td>Nivolumab</td>
            <td>Opdivo 100mg</td>
            <td><span class="badge badge-system">ç³»çµ±</span></td>
            <td>å•Ÿç”¨</td>
          </tr>
          <tr>
            <td>KC00123458</td>
            <td>Atezolizumab</td>
            <td>Tecentriq 1200mg</td>
            <td><span class="badge badge-system">ç³»çµ±</span></td>
            <td>å•Ÿç”¨</td>
          </tr>
          <tr>
            <td>KC00123459</td>
            <td>Durvalumab</td>
            <td>Imfinzi 500mg</td>
            <td><span class="badge badge-system">ç³»çµ±</span></td>
            <td>å•Ÿç”¨</td>
          </tr>
          <tr>
            <td>KC00123460</td>
            <td>Trastuzumab</td>
            <td>Herceptin 440mg</td>
            <td><span class="badge badge-system">ç³»çµ±</span></td>
            <td>å•Ÿç”¨</td>
          </tr>
        </tbody>
      </table>
    </div>
  </main>

  <script>
    function getCookie(name) {
      const value = '; ' + document.cookie;
      const parts = value.split('; ' + name + '=');
      if (parts.length === 2) return parts.pop().split(';').shift();
      return null;
    }
    if (!getCookie('twpas_auth')) window.location.href = '/login?expired=true';
    else {
      const user = JSON.parse(sessionStorage.getItem('user') || '{}');
      document.getElementById('username-display').textContent = user.username || '';
    }
    function logout() {
      sessionStorage.clear();
      document.cookie = 'twpas_auth=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT';
      window.location.href = '/login';
    }
  </script>
</body>
</html>
