<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å¥ä¿ä¸Šå‚³ - TWPAS</title>
  <link rel="stylesheet" href="/shared.css">
  <style>
    /* Page-specific styles */
    .alert {
      padding: var(--spacing-lg);
      border-radius: var(--radius-lg);
      margin-bottom: var(--spacing-lg);
    }
    .alert-info {
      background: var(--color-pending-bg);
      color: var(--color-pending-text);
      border: 1px solid #90caf9;
    }
    .status-ready {
      color: var(--color-approved-text);
    }
    .status-error {
      color: var(--color-rejected-text);
    }
    .btn {
      padding: 0.4rem 0.8rem;
      border-radius: var(--radius-sm);
      cursor: pointer;
      border: none;
      font-size: var(--font-size-sm);
    }
    .btn-upload {
      background: var(--color-approved-text);
      color: white;
    }
    .upload-stats {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: var(--spacing-lg);
      margin-bottom: var(--spacing-lg);
    }
    .stat-item {
      text-align: center;
      padding: var(--spacing-lg);
      background: var(--color-bg-light);
      border-radius: var(--radius-lg);
    }
    .stat-value {
      font-size: var(--font-size-3xl);
      font-weight: 600;
      color: var(--color-primary);
    }
    .stat-label {
      font-size: var(--font-size-sm);
      color: var(--color-text-secondary);
    }
  </style>
</head>
<body>
  <header class="header">
    <h1>ğŸ¥ TWPAS ç™Œç—‡ç”¨è—¥äº‹å‰å¯©æŸ¥ç³»çµ±</h1>
    <div class="header-right">
      <span class="user-badge" id="user-role-badge"></span>
      <span id="username-display"></span>
      <button class="logout-btn" onclick="logout()">ç™»å‡º</button>
    </div>
  </header>

  <nav class="sidebar">
    <ul class="sidebar-menu">
      <li><a href="/dashboard"><span>ğŸ“Š</span> å„€è¡¨æ¿</a></li>
      <div class="menu-divider"></div>
      <div class="menu-label">æ¡ˆä»¶ç®¡ç†</div>
      <li><a href="/claim/new"><span>â•</span> æ–°å¢ç”³è«‹</a></li>
      <li><a href="/claim"><span>ğŸ“‹</span> æ¡ˆä»¶åˆ—è¡¨</a></li>
      <div class="menu-divider"></div>
      <div class="menu-label">è³‡æ–™ç®¡ç†</div>
      <li><a href="/patient"><span>ğŸ‘¤</span> ç—…æ‚£è³‡æ–™</a></li>
      <li><a href="/valueset"><span>ğŸ“š</span> å€¼é›†ç®¡ç†</a></li>
      <div class="menu-divider"></div>
      <div class="menu-label">ç³»çµ±åŠŸèƒ½</div>
      <li><a href="/fhir"><span>ğŸ”„</span> FHIR è½‰æ›</a></li>
      <li><a href="/nhi-upload" class="active"><span>â˜ï¸</span> å¥ä¿ä¸Šå‚³</a></li>
    </ul>
  </nav>

  <main class="main">
    <div class="page-header">
      <h2>â˜ï¸ å¥ä¿ç½²ä¸Šå‚³ä½œæ¥­</h2>
    </div>

    <div class="alert alert-info">
      æ­¤åŠŸèƒ½å°‡æ¡ˆä»¶è³‡æ–™è½‰æ›ç‚º FHIR æ ¼å¼ä¸¦ä¸Šå‚³è‡³å¥ä¿ç½²äº‹å‰å¯©æŸ¥å¹³å°ã€‚è«‹ç¢ºèªæ¡ˆä»¶è³‡æ–™å®Œæ•´å¾Œå†é€²è¡Œä¸Šå‚³ã€‚
    </div>

    <div class="upload-stats">
      <div class="stat-item">
        <div class="stat-value">5</div>
        <div class="stat-label">å¾…ä¸Šå‚³</div>
      </div>
      <div class="stat-item">
        <div class="stat-value">12</div>
        <div class="stat-label">å·²ä¸Šå‚³</div>
      </div>
      <div class="stat-item">
        <div class="stat-value">8</div>
        <div class="stat-label">å¯©æ ¸ä¸­</div>
      </div>
      <div class="stat-item">
        <div class="stat-value">3</div>
        <div class="stat-label">å·²æ ¸å‡†</div>
      </div>
    </div>

    <div class="card">
      <div class="card-header">å¾…ä¸Šå‚³æ¡ˆä»¶</div>
      <div class="card-body">
        <table>
          <thead>
            <tr>
              <th><input type="checkbox" id="select-all"></th>
              <th>æ¡ˆä»¶ç·¨è™Ÿ</th>
              <th>ç—…æ‚£å§“å</th>
              <th>è—¥ç‰©</th>
              <th>ç‹€æ…‹</th>
              <th>æ“ä½œ</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><input type="checkbox"></td>
              <td>CL-2026-0002</td>
              <td>æâ—‹è¯</td>
              <td>Nivolumab</td>
              <td><span class="status-ready">âœ“ æº–å‚™å°±ç·’</span></td>
              <td><button class="btn btn-upload" onclick="uploadCase('CL-2026-0002')">ä¸Šå‚³</button></td>
            </tr>
            <tr>
              <td><input type="checkbox"></td>
              <td>CL-2026-0008</td>
              <td>è”¡â—‹èŠ¬</td>
              <td>Cetuximab</td>
              <td><span class="status-ready">âœ“ æº–å‚™å°±ç·’</span></td>
              <td><button class="btn btn-upload" onclick="uploadCase('CL-2026-0008')">ä¸Šå‚³</button></td>
            </tr>
          </tbody>
        </table>
        <div style="margin-top: var(--spacing-lg);">
          <button class="btn btn-upload" onclick="uploadSelected()">ğŸ“¤ æ‰¹æ¬¡ä¸Šå‚³é¸å–é …ç›®</button>
        </div>
      </div>
    </div>

    <div class="card">
      <div class="card-header">æœ€è¿‘ä¸Šå‚³ç´€éŒ„</div>
      <div class="card-body">
        <table>
          <thead>
            <tr>
              <th>æ¡ˆä»¶ç·¨è™Ÿ</th>
              <th>ä¸Šå‚³æ™‚é–“</th>
              <th>æ”¶ä»¶ç·¨è™Ÿ</th>
              <th>ç‹€æ…‹</th>
              <th>æ“ä½œ</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>CL-2026-0003</td>
              <td>2026-02-01 15:30</td>
              <td>NHI-2026020112345</td>
              <td><span class="status-badge status-uploaded">å¯©æ ¸ä¸­</span></td>
              <td><button class="btn btn-view">æŸ¥è©¢é€²åº¦</button></td>
            </tr>
            <tr>
              <td>CL-2026-0004</td>
              <td>2026-01-28 10:15</td>
              <td>NHI-2026012854321</td>
              <td><span class="status-badge status-ready">å·²æ ¸å‡†</span></td>
              <td><button class="btn btn-view">æŸ¥çœ‹çµæœ</button></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </main>

  <script src="/shared.js"></script>
  <script>
    function uploadCase(caseNumber) {
      if (confirm('ç¢ºå®šè¦ä¸Šå‚³æ¡ˆä»¶ ' + caseNumber + ' å—ï¼Ÿ')) {
        alert('ä¸Šå‚³æˆåŠŸï¼\n\næ”¶ä»¶ç·¨è™Ÿï¼šNHI-' + Date.now());
      }
    }

    function uploadSelected() {
      alert('æ‰¹æ¬¡ä¸Šå‚³åŠŸèƒ½é–‹ç™¼ä¸­...');
    }

    displayUserInfo();
  </script>
</body>
</html>
