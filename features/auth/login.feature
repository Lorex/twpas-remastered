# language: zh-TW
@auth @login @wip
功能: 使用者登入
  作為一個系統使用者
  我想要能夠登入系統
  以便存取事前審查相關功能

  背景:
    假設 系統已經啟動
    並且 資料庫中存在以下使用者:
      | 帳號          | 密碼       | 角色     | 狀態   |
      | doctor01      | Pass1234!  | 醫師     | 啟用   |
      | pharmacist01  | Pass1234!  | 藥師     | 啟用   |
      | admin01       | Pass1234!  | 管理員   | 啟用   |
      | inactive_user | Pass1234!  | 醫師     | 停用   |

  @happy-path
  場景: 使用有效帳號密碼登入
    當 我在登入頁面
    並且 我輸入帳號 "doctor01"
    並且 我輸入密碼 "Pass1234!"
    並且 我點擊登入按鈕
    那麼 我應該看到儀表板頁面
    並且 我應該看到歡迎訊息包含 "doctor01"
    並且 系統應該記錄登入日誌

  場景: 使用錯誤密碼登入
    當 我在登入頁面
    並且 我輸入帳號 "doctor01"
    並且 我輸入密碼 "WrongPassword"
    並且 我點擊登入按鈕
    那麼 我應該看到錯誤訊息 "帳號或密碼錯誤"
    並且 我應該仍在登入頁面

  場景: 使用不存在的帳號登入
    當 我在登入頁面
    並且 我輸入帳號 "nonexistent_user"
    並且 我輸入密碼 "Pass1234!"
    並且 我點擊登入按鈕
    那麼 我應該看到錯誤訊息 "帳號或密碼錯誤"
    並且 我應該仍在登入頁面

  場景: 使用停用帳號登入
    當 我在登入頁面
    並且 我輸入帳號 "inactive_user"
    並且 我輸入密碼 "Pass1234!"
    並且 我點擊登入按鈕
    那麼 我應該看到錯誤訊息 "帳號已停用，請聯繫管理員"
    並且 我應該仍在登入頁面

  場景: 空白帳號或密碼登入
    當 我在登入頁面
    並且 我輸入帳號 ""
    並且 我輸入密碼 ""
    並且 我點擊登入按鈕
    那麼 我應該看到錯誤訊息 "請輸入帳號和密碼"

  場景: 登入後閒置超時
    假設 我已經登入為 "doctor01"
    當 系統閒置超過 30 分鐘
    並且 我嘗試存取任何頁面
    那麼 我應該被重導到登入頁面
    並且 我應該看到訊息 "您的登入已過期，請重新登入"
