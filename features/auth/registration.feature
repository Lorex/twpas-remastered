# language: zh-TW
@auth @registration
功能: 使用者註冊
  作為一個新使用者
  我想要能夠註冊系統帳號
  以便開始使用事前審查功能

  背景:
    假設 系統已經啟動

  @happy-path
  場景: 成功註冊新帳號
    當 我在註冊頁面
    並且 我填寫以下註冊資訊:
      | 欄位       | 值                    |
      | 帳號       | new_doctor            |
      | 電子郵件   | doctor@hospital.tw    |
      | 密碼       | SecurePass123!        |
      | 確認密碼   | SecurePass123!        |
      | 姓名       | 王大明                |
      | 角色       | 醫師                  |
    並且 我點擊註冊按鈕
    那麼 我應該看到訊息 "註冊成功，請等待管理員審核"
    並且 系統應該建立一個待審核的使用者帳號
    並且 系統應該發送通知給管理員

  場景: 註冊時帳號已存在
    假設 資料庫中已存在帳號 "existing_user"
    當 我在註冊頁面
    並且 我填寫帳號 "existing_user"
    並且 我點擊註冊按鈕
    那麼 我應該看到錯誤訊息 "此帳號已被使用"

  場景: 註冊時電子郵件已存在
    假設 資料庫中已存在電子郵件 "used@hospital.tw"
    當 我在註冊頁面
    並且 我填寫電子郵件 "used@hospital.tw"
    並且 我點擊註冊按鈕
    那麼 我應該看到錯誤訊息 "此電子郵件已被使用"

  場景: 註冊時密碼不符合規則
    當 我在註冊頁面
    並且 我填寫密碼 "weak"
    並且 我點擊註冊按鈕
    那麼 我應該看到錯誤訊息包含 "密碼必須至少8個字元"

  場景: 註冊時確認密碼不一致
    當 我在註冊頁面
    並且 我填寫密碼 "SecurePass123!"
    並且 我填寫確認密碼 "DifferentPass123!"
    並且 我點擊註冊按鈕
    那麼 我應該看到錯誤訊息 "確認密碼不一致"

  場景大綱: 密碼強度驗證
    當 我在註冊頁面
    並且 我填寫密碼 "<密碼>"
    那麼 密碼強度應該顯示為 "<強度>"
    並且 驗證結果應該為 "<結果>"

    例子:
      | 密碼            | 強度   | 結果   |
      | 123456          | 弱     | 不通過 |
      | password        | 弱     | 不通過 |
      | Password1       | 中     | 不通過 |
      | Password1!      | 強     | 通過   |
      | SecurePass123!  | 強     | 通過   |
